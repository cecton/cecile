#!/bin/bash

which tic >/dev/null || exit 1
which autoconf >/dev/null || exit 1

if [ ! -x ~/bin/dwm -a -e ~/repos/dwm/.git ]; then
	(
	set -e -x
	cd ~/repos/dwm
	echo "Compiling dwm..."
	cp -fv ~/.config/dwm.h ./config.h
	make
	echo "Installing dwm..."
	cp -v dwm ~/bin/dwm
	)
fi

if [ ! -x ~/bin/st -a -e ~/repos/st/.git ]; then
	(
	set -e -x
	cd ~/repos/st
	echo "Compiling st..."
	cp -fv ~/.config/st.h ./config.h
	make
	echo "Installing st..."
	cp -v st ~/bin/st
	tic st.info
	)
fi

if [ ! -x ~/bin/fish -a -e ~/repos/fish/.git ]; then
	(
	set -e -x
	cd ~/repos/fish
	echo "Compiling fish..."
	autoconf
	./configure --prefix=$HOME/.local --bindir=$HOME/bin
	make
	echo "Installing fish..."
	make install
	)
fi
